---
title:      iOS面试题答案整理-Swift
date:       2024-04-22
tags:
- iOS
- 面试
--- 

## 1、Swift数据类型，常量、变量、元组

Swift 是一种苹果推出的强类型、编译型的编程语言，用于 iOS，macOS，watchOS 和 tvOS 等应用开发。以下是对 Swift 中的数据类型、常量和变量、以及元组的简要说明：

**数据类型**

Swift 支持多种数据类型，包括整数类型（如 Int、UInt）、浮点数类型（如 Double、Float）、布尔类型（Bool）、字符串类型（String）等等。这些都是基础数据类型，Swift 还支持更复杂的数据类型，如数组（Array）、字典（Dictionary）、集合（Set）、结构体（Struct）、枚举（Enumeration）等。

**常量和变量**

在 Swift 中，常量和变量都用于存储数据。常量存储后其值不可更改，而变量的值可以随时更改。

* 常量：使用 `let` 关键字声明，一旦赋值后就不能再修改。例如：


```swift
let constantValue = 10
```
* 变量：使用 `var` 关键字声明，其值可以在程序运行过程中被修改。例如：


```swift
var variableValue = 20
variableValue = 30  // 之后可以改变变量的值
```
**元组**

元组（Tuples）是 Swift 中一个特殊的复合数据类型，它允许你将多个值组合成一个复合值。元组内的值可以是任意类型，并不要求是相同类型。你可以通过下标或者命名元素来访问元组中的值。

例如：


```swift
let person = ("John", 30, "Developer")
// 这是一个包含三个元素的元组，分别是一个字符串，一个整数和一个字符串。

// 可以通过下标访问元组中的元素
print(person.0)  // 输出 "John"
print(person.1)  // 输出 30
print(person.2)  // 输出 "Developer"

// 你也可以给元组的每个元素命名，然后通过名字来访问
let httpResponse = (statusCode: 200, description: "OK")
print(httpResponse.statusCode)  // 输出 200
```
以上就是 Swift 中的数据类型、常量和变量以及元组的基本概念。

### 值类型和引用类型区别，swift中值类型有哪些，引用类型有哪些。和OC相比有什么区别？

值类型和引用类型的区别主要在于它们在内存中如何存储和传递数据。以下是它们之间的主要区别，以及在Swift中的具体类型，同时与Objective-C（OC）进行了比较。

**值类型和引用类型的区别：**

1. **存储方式**：值类型直接存储数据值，而引用类型存储的是指向数据值的引用（或指针）。
2. **数据传递**：当值类型的数据被传递时，它会创建一个数据的副本，因此原始数据不会被改变。而引用类型传递的是引用，任何对引用的修改都会影响到原始数据。
3. **内存管理**：值类型通常分配在栈上，效率较高；引用类型分配在托管堆上，需要额外的内存管理。

**Swift中的值类型和引用类型：**

* **值类型**：在Swift中，值类型包括整型（Int）、浮点型（Float、Double）、布尔型（Bool）、字符（Character）、字符串（String，尽管在Swift中String是结构体，但作为值类型表现）、元组、集合类型（如Array、Dictionary、Set）、枚举（enum）和结构体（struct）。这些都是值类型，当它们被赋值或传递时，会创建数据的副本。
* **引用类型**：在Swift中，主要的引用类型是类（class）。与结构体和枚举不同，类可以继承，并且可以有引用类型的属性。

**与Objective-C相比的区别：**

1. **类型安全性**：Swift是类型安全的语言，它强制要求变量和常量的类型明确，这有助于减少运行时错误。相比之下，Objective-C的类型检查较为宽松，有时可能导致类型不匹配的错误在运行时才被发现。
2. **值类型与引用类型的处理**：在Objective-C中，大部分对象都是引用类型，即使是像NSString这样的基本数据类型，也是通过指针来引用的。而在Swift中，许多基本数据类型（如Int、Float、String等）都是值类型，这提供了更好的数据封装和不可变性保证。
3. **内存管理**：Swift使用自动引用计数（ARC）来管理内存，这大大简化了内存管理的复杂性。Objective-C也支持ARC，但开发者仍然需要更谨慎地处理内存管理问题，特别是在处理引用类型和手动内存管理时。
4. **语法简洁性**：Swift的语法更加简洁和现代化，减少了不必要的符号和繁琐的语法结构。这使得Swift代码更加易读和易写。Objective-C的语法则相对复杂一些，特别是在处理指针和引用时。

综上所述，Swift通过强化值类型和引用类型的区别、提供类型安全和简洁的语法等方式，为开发者提供了更高效、更安全的编程体验。

---------------------------------------------------------------------

### Optional可选类型属于引用类型还是值类型？如何实现的

在Swift中，`Optional`是一个枚举类型，它被定义为一个泛型枚举，可以包裹任何类型的值，或者表示没有值（即`nil`）。由于枚举在Swift中是值类型，因此`Optional`本身也是一个值类型。

`Optional`的实现大致如下：

```swift
enum Optional<T> {
    case none
    indirect case some(T)
}
```

这里使用了Swift的枚举和泛型特性。`Optional`枚举有两个可能的案例（case）：`none`表示没有值，对应于`nil`；`some(T)`表示有值，其中`T`是一个泛型参数，代表可以包裹任意类型的值。

由于`Optional`是值类型，当你将一个`Optional`值赋值给另一个变量时，会进行值的拷贝，而不是引用的拷贝。这意味着每个变量都有自己的`Optional`值拷贝，对一个变量的修改不会影响其他变量。

Swift中的`Optional`类型是类型安全的，它要求开发者显式地处理可能的`nil`值，这有助于减少运行时的空指针异常。你可以使用可选绑定（optional binding）或者可选链（optional chaining）来安全地处理`Optional`值。

在实际使用中，Swift提供了语法糖，使得处理`Optional`类型更加简洁。例如，你可以直接使用`?`来表示一个可选类型，如`Int?`表示一个可选的整数类型。此外，Swift还提供了`if let`、`guard let`等语法结构来方便地解包和处理`Optional`值。

总的来说，`Optional`类型是Swift语言特性中的一个重要组成部分，它提供了一种安全的方式来处理可能不存在的值，从而增强了代码的健壮性和可读性。

---------------------------------------------------------------------

### 常量和变量分别如何声明？

---------------------------------------------------------------------

### 可选类型解包方式有哪些？

---------------------------------------------------------------------

### 多重可选项的情况是怎么处理的？

---------------------------------------------------------------------

### 什么是可选链？可选链的结果是可选项么？

---------------------------------------------------------------------

### 什么是元祖，元祖能做什么？

---------------------------------------------------------------------

### 什么是字面量，字面量协议可以做什么？

---------------------------------------------------------------------

## 2、Swift流程控制

### for in 在Swift上有什么特点？

---------------------------------------------------------------------

### 什么是区间类型？跨间隔的区间怎么实现？stride

---------------------------------------------------------------------

### Swift中switch怎么实现贯穿效果？复合条件或fallthrouh

---------------------------------------------------------------------

### switch与元组结合有什么效果？元祖与where结合呢？

---------------------------------------------------------------------

### switch区间匹配？

---------------------------------------------------------------------

### guard..else与do..while有什么区别

---------------------------------------------------------------------

## 3、Swift结构体，类，枚举

### 枚举是否可以递归？indirect

---------------------------------------------------------------------

### 枚举值原始值和附加值分别是什么？内存占用怎么计算？

---------------------------------------------------------------------

### 结构体内存占用如何计算？

---------------------------------------------------------------------

### 结构体自定义初始化方法和自动生成的初始化方法有什么关系？

---------------------------------------------------------------------

### 结构体能否继承？如果改变property，需要怎么做？mutating

---------------------------------------------------------------------

### 类自动生成的初始化方法与结构体自动初始化方法有何区别？

---------------------------------------------------------------------

### struct 与 class有什么区别？值类型和引用类型，继承，初始化方法，属性值改变

---------------------------------------------------------------------

### 如何给结构体，类，枚举增加subscript下标？subscript可以用来做什么？

---------------------------------------------------------------------

## 4、swift方法、闭包

### 实例方法和类方法有什么区别？

---------------------------------------------------------------------

### 值类型的属性想要被自身的实例方法修改，怎么实现？mutating

---------------------------------------------------------------------

### 什么是闭包？闭包表达式是怎么样的？

---------------------------------------------------------------------

### 闭包作为参数时的缩写？什么是尾随闭包?

---------------------------------------------------------------------

### @autoclosure是什么？有什么作用？

---------------------------------------------------------------------

### Swift函数定义，函数重载，函数类型

---------------------------------------------------------------------

## 5、Swift属性，单例

### 什么是计算属性，什么是存储属性？只读计算属性，延迟存储属性呢？

---------------------------------------------------------------------

### 枚举的原始值属于计算属性还是存储属性？

---------------------------------------------------------------------

### 什么是属性观察器？willSet，didSet

---------------------------------------------------------------------

### 实例属性和类型属性有什么区别？

---------------------------------------------------------------------

### Swift单例如何实现？

---------------------------------------------------------------------

### 存储类型属性有什么特点? 在什么时候初始化？多个线程同时访问呢？

---------------------------------------------------------------------

## 6、swift 泛型，关联类型，协议类型，不透明类型

### 泛型有什么作用？类型参数化

---------------------------------------------------------------------

### 什么是关联类型？有什么作用？给协议中用到的类型定义一个占位名称

---------------------------------------------------------------------

### 什么是协议类型，协议类型能否作为函数返回值？

---------------------------------------------------------------------

### 泛型类型如何约束？

---------------------------------------------------------------------

### 什么是不透明类型？some限制只能返回一种类型

---------------------------------------------------------------------

## 7、swift运算符

### 什么是溢出运算符？

---------------------------------------------------------------------

### 什么是运算符重载？

---------------------------------------------------------------------

### Equatable协议与==运算符有什么关系？Swift为哪些类型提供默认的 Equatable 实现？

---------------------------------------------------------------------

### 如何自定义新的运算符？全局作用域使用operator进行声明

---------------------------------------------------------------------

## 8、Swift初始化器

### 指定初始化器和便捷初始化器有什么区别？required

---------------------------------------------------------------------

### 重写父类指定初始化器和便捷初始化器有何区别？

---------------------------------------------------------------------

### 初始化器自动继承的规则？

---------------------------------------------------------------------

### 初始化器中赋值会触发属性观察器么？

---------------------------------------------------------------------

### 什么是反初始化器？deinit

---------------------------------------------------------------------

## 9、Swift内存管理

### swift 中内存管理方案？ARC引用类型有几种？strong、weak、unowned

---------------------------------------------------------------------

### Swift闭包循环引用如何产生，怎么解决？

---------------------------------------------------------------------

### 能否在定义闭包属性的同时引用self？lazy

---------------------------------------------------------------------

### 如果lazy属性是闭包调用的结果，是否需要考虑循环引用问题？

---------------------------------------------------------------------

### 什么是逃逸闭包?逃逸闭包能否捕获inout参数？@escaping

---------------------------------------------------------------------

### 什么是内存访问冲突？Conflicting Access to Memory

---------------------------------------------------------------------

### Swift中指针类型有哪几种？

---------------------------------------------------------------------

## 10、Swift扩展

### Swift中扩展与OC中分类有什么区别？能添加什么，不能添加什么？

---------------------------------------------------------------------

### Swift中扩展不能添加指定初始化器，不能添加反初始化器

---------------------------------------------------------------------

### 结构体自定义初始化器时不会生成默认初始化器。但是可以通过扩展实现两者同时存在

---------------------------------------------------------------------

### 扩展可以给协议提供默认实现，也间接实现可选协议的效果

---------------------------------------------------------------------

### 扩展可以给协议扩充协议中从未声明过的方法

---------------------------------------------------------------------

### 扩展中依然可以使用原类型中的泛型类型

---------------------------------------------------------------------

## 11、Swift继承

### 值类型并不支持继承，只有类支持继承

---------------------------------------------------------------------

### swift中是否有类似NSObject的基类？

---------------------------------------------------------------------

### Swift如何重写父类的下标、方法、属性？override

---------------------------------------------------------------------

### 如何限制不能被重写，或者不能被继承？final

---------------------------------------------------------------------

### 是否可以重写存储属性？

---------------------------------------------------------------------

### let修饰的属性能否重写？

---------------------------------------------------------------------

### static修饰的属性能否被重写？

---------------------------------------------------------------------

## 12、Swift模式匹配

### 什么是模式匹配？

---------------------------------------------------------------------

### 什么是通配符模式？标识符模式？值绑定模式？元组模式？枚举Case模式？可选模式？类型转换模式？表达式模式？

---------------------------------------------------------------------

### 通配符匹配中_和_?有什么区别？

---------------------------------------------------------------------

### 枚举Case模式中if case语句是什么？

---------------------------------------------------------------------

## 13、Swift协议与面向协议编程,协议实现前缀

### 什么是协议？协议能添加什么？

---------------------------------------------------------------------

### 协议中定义的内容是否必须全部都实现？如果想要实现可选协议呢？

---------------------------------------------------------------------

### 实现协议时的属性权限要不小于协议中定义的属性权限

---------------------------------------------------------------------

### 协议中定义的init方法，能否用init?来实现？

---------------------------------------------------------------------

### 枚举值如何进行遍历？遵守CaseIterable协议

---------------------------------------------------------------------

### 自定义打印需要遵循什么协议？CustomStringConvertible、 CustomDebugStringConvertible

---------------------------------------------------------------------

### Any、AnyObject有什么区别？如何定义只能类遵守的协议？

---------------------------------------------------------------------

### 什么是面向协议编程？解决了面向对象编程哪些问题？

---------------------------------------------------------------------

### 如何利用协议实现前缀效果？

---------------------------------------------------------------------

## 14、Swift访问控制

### Swift访问控制有哪几种访问级别？分别是什么？open，public，internal，fileprivate，private

---------------------------------------------------------------------

### 访问级别的使用准则？一个实体不可以被更低访问级别的实体定义

---------------------------------------------------------------------

### 元组类型，泛型类型的访问级别如何确定？

---------------------------------------------------------------------

### 类型的访问级别对其成员，嵌套类型的影响？

---------------------------------------------------------------------

### 子类重写成员的访问级别有什么限制？ ≥ 子类的访问级别，或者 ≥ 父类被重写成员的访问级别

---------------------------------------------------------------------

### 协议定义的方法，枚举类型的case等是否能单独设置访问级别？

---------------------------------------------------------------------

### public类的默认初始化器是internal级别。如果一个public类想在另一个模块调用编译生成的默认无参初始化器，必须显式提供public的无参初始化器

---------------------------------------------------------------------

## 15、swift 错误处理

### 如何自定义错误？遵守Error协议

---------------------------------------------------------------------

### 如何抛出异常，如何捕获异常？throw，do-catch

---------------------------------------------------------------------

### 可以使用try?、try!调用可能会抛出Error的函数，这样就不用去处理Error

---------------------------------------------------------------------

### 如何定义以任何方式（抛错误、return等）离开代码块前必须要执行的代码？defer

---------------------------------------------------------------------

### fatalError有作用？可以做什么？

---------------------------------------------------------------------

## 16、swift与OC

### MARK、TODO、FIXME

---------------------------------------------------------------------

### Swift条件编译？

---------------------------------------------------------------------

### Swift与OC互相调用？

---------------------------------------------------------------------

### Swift中String与NSString有什么区别？

---------------------------------------------------------------------

### 如何让Swift内容具有动态性？@objc dynamic

---------------------------------------------------------------------

### Swift资源名如何管理？